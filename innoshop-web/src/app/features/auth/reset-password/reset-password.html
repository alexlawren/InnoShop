<div class="login-wrapper"> 
  <div class="login-card mat-elevation-z4">
    
    <div class="login-header">
      <mat-icon class="logo-icon">lock_reset</mat-icon>
      <h1>Новый пароль</h1>
      <p>Придумайте сложный пароль</p>
    </div>

    <form #resetForm="ngForm" (ngSubmit)="onSubmit()">
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Новый пароль</mat-label>
        
        <input matInput 
               [type]="hidePassword ? 'password' : 'text'" 
               [(ngModel)]="newPassword" 
               name="newPass" 
               required 
               minlength="8" 
               #newPassInput="ngModel">
               
        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>

        <mat-error *ngIf="newPassInput.hasError('required')">Пароль обязателен</mat-error>
        <mat-error *ngIf="newPassInput.hasError('minlength')">Минимум 8 символов</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Повторите пароль</mat-label>
        <input matInput type="password" [(ngModel)]="confirmPassword" name="confirmPass" required>
      </mat-form-field>

      <button mat-flat-button class="login-btn" type="submit" 
              [disabled]="isLoading || resetForm.invalid || newPassword !== confirmPassword">
        <div class="btn-content">
          <ng-container *ngIf="!isLoading">СОХРАНИТЬ</ng-container>
          <mat-spinner *ngIf="isLoading" diameter="24" color="accent"></mat-spinner>
        </div>
      </button>

    </form>
  </div>
</div>